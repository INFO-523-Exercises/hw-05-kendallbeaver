---
title: "hw05"
format: html
editor: visual
---

# Analyzing Parasites Killing Bee Colonies in Arizona From 2015 - 2021

## Intro

Two national datasets regarding bee populations ("colony.csv") and stressors causing bee population decline ("stressor.csv") were analyzed for the purposes of analyzing and predicting liner regression.

Data in both datasets have been categorized based on season and the two main culprits leading to population decline are "Varroa mites" followed by "Other pests/parasites".

Varroa mites are parasites that feed off the bodily fluids of adult bees and younger, newborn bees within a bee population, leading to a significant decline in bee population across the entire nation.

This assignment looks to analyze the linear affect that this parasite specifically has on the Arizona bee population from 2015 - 2021.

## Import Packages

```{r}

# Load packages

if (!require(pacman))
  install.packages("pacman")

pacman::p_load(tidymodels,
               dplyr,
               tidyverse,
               ranger,
               randomForest,
               glmnet,
               here,
               formattable,
               dlookr,
               yardstick,
               gridExtra)
```

## Import Code

```{r}

# Import two correlated datasets, "colony" and "stressor": 

# Read colony data (dataset is from 2015 - 2021)
colony <- read_csv(here('./data/colony.csv'))
arizona_colony <- filter(colony, state %in% "Arizona")
arizona_colony

# Read stressor data
stressor <- read_csv(here('./data/stressor.csv'))
arizona_stressor <- filter(stressor, state %in% "Arizona")
arizona_stressor
```

## EDA Analysis on Colony Data for Arizona Bee Population

```{r}

# Analyze "arizona_colony" data: 

arizona_colony |> summary()

# Check for missing values: 

na_values_arizona_colony <- colSums(is.na(arizona_colony))
na_values_arizona_colony

# Analyze and inspect the rows missing values: 

missing_rows_arizona_colony <- arizona_colony %>%
  filter(!complete.cases(.))
missing_rows_arizona_colony

# Remove "colony_reno_pct" (impute):

arizona_colony %>%
    select(-colony_reno_pct) %>%
    filter(!complete.cases(.))
arizona_colony

# Don't impute April-June 2019, and remove row, as this is only row with null values and entire row of data wasn't collected: 

arizona_colony %>% na.omit()
```

## EDA Analysis on Stressor Dataset for Arizona Bees: Beginning to Analyze and Assess Major Causes of Population Decline

```{r}

# Filter stressor data: 

arizona_stressor |> summary()
arizona_stressor
# Analyze "stress_pct" distribution with a box plot:

boxplot(arizona_stressor$stress_pct, main = "Boxplot of stress_pct")

# Rearrange stressor values from high to low:

arizona_stressor %>% arrange(desc(stress_pct))

# "Varroa mites" are having the main effect on the declining AZ bee population from a few seasonal months in 2015-2019, followed by "Other pests/parasites" in April-June 2016, then back to "Varroa mites from a few seasonal months in 2016-2018.
```

## Part I of II: Colony Lost Analysis

This dataset views the trend of bee colonies lost in Arizona over a six-year period (2015-2021).

```{r}

# Analyze Colony Lost - Max & Min 

stressor_counts <- table(stressor$stressor)
stressor_counts

max_colony_stressor <- max(stressor$stressor)
min_colony_stressor <- min(stressor$stressor)
max_colony
min_age
```

## Part II of II: Stressors Killing Bee Colonies

```{r}

# Need to classify "Stressors" as factors instead of characters:



my_data$Name <- as.factor(my_data$Name)
```
